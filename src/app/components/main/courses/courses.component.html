<div class="courses-container">
  <!-- Modern Navigation Breadcrumb -->
  <div class="modern-breadcrumb">
    <div class="breadcrumb-container">
      <div class="breadcrumb-item">
        <a routerLink="/home" class="breadcrumb-link">
          <i class="fas fa-home"></i>
          <span>Home</span>
        </a>
        <i class="fas fa-chevron-right breadcrumb-separator"></i>
      </div>
      <div class="breadcrumb-item">
        <a routerLink="/categories" class="breadcrumb-link">
          <i class="fas fa-th-large"></i>
          <span>Categories</span>
        </a>
        <i class="fas fa-chevron-right breadcrumb-separator"></i>
      </div>
      <div class="breadcrumb-item active">
        <span class="breadcrumb-current">{{ categoryName }}</span>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner">
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
    </div>
    <p class="loading-text">Discovering amazing courses...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <div class="error-card">
      <i class="fas fa-exclamation-triangle error-icon"></i>
      <h3 class="error-title">Oops! Something went wrong</h3>
      <p class="error-message">{{ error }}</p>
      <button class="retry-btn" (click)="loadCourses()">
        <i class="fas fa-redo"></i>
        <span>Try Again</span>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div *ngIf="!loading && !error" class="main-content">
    <!-- Header Section -->
    <div class="header-section">
      <div class="header-content">
        <div class="header-info">
          <h1 class="page-title">
            <i class="fas fa-graduation-cap title-icon"></i>
            {{ categoryName }}
          </h1>
          <p class="page-subtitle">Explore and master new skills with our curated courses</p>
        </div>
        <div class="header-stats">
          <div class="stat-card">
            <div class="stat-number">{{ courses.length }}</div>
            <div class="stat-label">Course{{ courses.length !== 1 ? 's' : '' }}</div>
          </div>
          <div class="stat-card">
            <div class="stat-number">{{ getEnrolledCount() }}</div>
            <div class="stat-label">Enrolled</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Filter & Sort Section -->
    <div class="filter-section">
      <div class="filter-container">
        <div class="filter-group">
          <label class="filter-label">Filter by:</label>
          <select class="filter-select" [(ngModel)]="selectedFilter" (change)="onFilterChange()">
            <option value="all">All Courses</option>
            <option value="enrolled">Enrolled</option>
            <option value="available">Available</option>
            <option value="completed">Completed</option>
          </select>
        </div>
        <div class="view-toggle">
          <button class="view-btn" [class.active]="viewMode === 'grid'" (click)="setViewMode('grid')">
            <i class="fas fa-th-large"></i>
          </button>
          <button class="view-btn" [class.active]="viewMode === 'list'" (click)="setViewMode('list')">
            <i class="fas fa-list"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Courses Grid -->
    <div class="courses-grid" [class.list-view]="viewMode === 'list'">
      <div class="course-item" 
           *ngFor="let course of getFilteredCourses(); trackBy: trackByCourse; let i = index"
           [style.animation-delay]="i * 100 + 'ms'">
        <div class="course-card-wrapper" 
             (click)="viewCourseDetail(course.courseId)"
             role="button"
             tabindex="0"
             (keydown.enter)="viewCourseDetail(course.courseId)"
             (keydown.space)="viewCourseDetail(course.courseId)">
          
          <div class="course-card">
            <!-- Course Image Section -->
            <div class="course-image-container">
              <div class="course-image">
                <img *ngIf="!course.imageLoadError" 
                     [src]="getCourseImageUrl(course)" 
                     class="course-img" 
                     [alt]="course.courseName"
                     (error)="onImageError($event, course)"
                     (load)="onImageLoad($event, course)">
                
                <div *ngIf="course.imageLoadError" class="fallback-image">
                  <div class="fallback-content">
                    <i class="fas fa-book-open fallback-icon"></i>
                    <span class="fallback-text">{{ course.courseName }}</span>
                  </div>
                </div>
                
                <div class="course-overlay">
                  <div class="play-button">
                    <i class="fas fa-play"></i>
                  </div>
                </div>
              </div>
              
              <!-- Status Badge -->
              <div class="status-badge">
                <span *ngIf="course.isCompleted" class="badge completed">
                  <i class="fas fa-check"></i>
                  Completed
                </span>
                <span *ngIf="course.isEnrolled && !course.isCompleted" class="badge enrolled">
                  <i class="fas fa-user-check"></i>
                  Enrolled
                </span>
                <span *ngIf="!course.isEnrolled && !course.isCompleted" class="badge available">
                  <i class="fas fa-plus"></i>
                  Available
                </span>
              </div>
            </div>
            
            <!-- Course Content -->
            <div class="course-content">
              <div class="course-header">
                <h3 class="course-title">{{ course.courseName }}</h3>
                <p class="course-description">
                  {{ course.description || 'Discover new skills and knowledge with this comprehensive course.' }}
                </p>
              </div>
              
              <!-- Course Meta Information -->
              <div class="course-meta">
                <div class="meta-item" *ngIf="course.durationInMinutes">
                  <i class="fas fa-clock meta-icon"></i>
                  <span class="meta-text">{{ course.durationInHours }} hours</span>
                </div>
                <div class="meta-item" *ngIf="course.author">
                  <i class="fas fa-user meta-icon"></i>
                  <span class="meta-text">{{ course.author }}</span>
                </div>
                <div class="meta-item">
                  <i class="fas fa-signal meta-icon"></i>
                  <span class="meta-text">{{ getDifficultyLevel(course) }}</span>
                </div>
              </div>
              
              <!-- Progress Section -->
              <div class="progress-section" *ngIf="course.isEnrolled">
                <div class="progress-header">
                  <span class="progress-label">Progress</span>
                  <span class="progress-percentage">{{ course.progress || 0 }}%</span>
                </div>
                <div class="progress-bar-container">
                  <div class="progress-bar" 
                       [class]="getProgressClass(course.progress || 0)"
                       [style.width.%]="course.progress || 0">
                    <div class="progress-glow"></div>
                  </div>
                </div>
              </div>
              
              <!-- Action Section -->
              <div class="course-actions">
                <button class="action-btn primary" 
                        [class]="getButtonClass(course)"
                        (click)="course.isEnrolled ? viewCourseDetail(course.courseId) : enrollInCourse(course, $event)"
                        [disabled]="course.isCompleted">
                  <i class="btn-icon" 
                     [class.fa-play]="!course.isEnrolled && !course.isCompleted"
                     [class.fa-arrow-right]="course.isEnrolled && !course.isCompleted"
                     [class.fa-check]="course.isCompleted"></i>
                  <span>{{ getButtonText(course) }}</span>
                </button>
                
                <div class="course-rating" *ngIf="course.isCompleted">
                  <i class="fas fa-star rating-star"></i>
                  <i class="fas fa-star rating-star"></i>
                  <i class="fas fa-star rating-star"></i>
                  <i class="fas fa-star rating-star"></i>
                  <i class="fas fa-star rating-star"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="getFilteredCourses().length === 0" class="empty-state">
      <div class="empty-illustration">
        <i class="fas fa-search empty-icon"></i>
        <div class="empty-circles">
          <div class="circle circle-1"></div>
          <div class="circle circle-2"></div>
          <div class="circle circle-3"></div>
        </div>
      </div>
      <h3 class="empty-title">No courses found</h3>
      <p class="empty-message">
        We couldn't find any courses matching your criteria in "{{ categoryName }}".
      </p>
      <div class="empty-actions">
        <button class="action-btn secondary" routerLink="/categories">
          <i class="fas fa-arrow-left"></i>
          <span>Browse Categories</span>
        </button>
        <button class="action-btn outline" (click)="resetFilters()">
          <i class="fas fa-refresh"></i>
          <span>Reset Filters</span>
        </button>
      </div>
    </div>
  </div>
</div>