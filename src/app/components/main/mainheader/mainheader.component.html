<header class="header">
  <!-- University Title with Typewriter Effect -->
  <div class="university-title">
    <h1 class="typewriter-text">{{ displayText }}<span class="cursor">|</span></h1>
  </div>

  <!-- Search Form -->
  <form class="search-form" (submit)="handleSearchSubmit($event)">
    <div class="search-container">
      <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="8"></circle>
        <path d="m21 21-4.3-4.3"></path>
      </svg>
      <input 
        type="search" 
        class="search-input" 
        placeholder="Search..." 
        [(ngModel)]="searchQuery" 
        name="search"
      >
    </div>
  </form>

  <!-- Actions -->
  <div class="actions">
    <!-- My Learning Button -->
    <button class="my-learning-button" (click)="onMyLearningClick()" aria-label="My Learning">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
      </svg>
      <span class="my-learning-text">My Learning</span>
    </button>

    <!-- Profile Container with Dropdown -->
    <div class="profile-container" (clickOutside)="closeDropdown()">
      <button class="profile-button" (click)="toggleProfileDropdown()" aria-label="User profile">
        <div class="avatar">
          <img *ngIf="userAvatar" [src]="userAvatar" [alt]="userName" class="avatar-image">
          <span *ngIf="!userAvatar" class="avatar-initial">{{ getUserInitial() }}</span>
        </div>
        <div class="profile-info d-none d-md-block">
          <span class="profile-name">{{ userName }}</span>
        </div>
        <svg class="dropdown-arrow" [class.rotated]="isProfileDropdownOpen" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m6 9 6 6 6-6"></path>
        </svg>
      </button>

      <!-- Profile Dropdown Menu -->
      <div class="profile-dropdown" [class.show]="isProfileDropdownOpen" @slideDown>
        <!-- User Info Section -->
        <div class="dropdown-header">
          <div class="user-avatar-large">
            <img *ngIf="userAvatar" [src]="userAvatar" [alt]="userName" class="avatar-image">
            <span *ngIf="!userAvatar" class="avatar-initial-large">{{ getUserInitial() }}</span>
          </div>
          <div class="user-details">
            <h4 class="user-name">{{ userName }}</h4>
            <p class="user-email">{{ userEmail }}</p>
          </div>
        </div>

        <!-- Divider -->
        <div class="dropdown-divider"></div>

        <!-- Menu Items -->
        <div class="dropdown-menu-items">
          <!-- Account Settings -->
          <button class="dropdown-item" (click)="onAccountSettings()">
            <i class="bi bi-gear"></i>
            <span>Account Settings</span>
          </button>

          <!-- Change Password -->
          <button class="dropdown-item" (click)="onChangePassword()">
            <svg class="item-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="20" height="12" x="2" y="6" rx="2"></rect>
              <circle cx="12" cy="12" r="2"></circle>
            </svg>
            <span>Change Password</span>
          </button>
        </div>

        <!-- Divider -->
        <div class="dropdown-divider"></div>

        <!-- Logout -->
        <button class="dropdown-item logout-item" (click)="onLogout()">
          <svg class="item-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
          <span>Logout</span>
        </button>
      </div>
    </div>
  </div>

  <div class="dropdown-backdrop" [class.show]="isProfileDropdownOpen" (click)="closeDropdown()"></div>
</header>
