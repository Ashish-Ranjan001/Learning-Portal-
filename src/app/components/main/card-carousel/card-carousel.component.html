<div class="carousel-container">
  <!-- Dashboard Button -->
  <button class="dashboard-btn" (click)="handleDashboardClick()">
    My Dashboard
  </button>

  <!-- Progress Bar -->
  <div class="progress-container">
    <div class="progress-bar">
      <div class="progress-fill"
           [style.background]="currentCard().color"
           [style.width]="progressWidth + '%'"></div>
    </div>
  </div>

  <!-- Main Card Display -->
  <div class="card-wrapper">
    <div class="course-card" 
         [class.transitioning]="isTransitioning()"
         [style.background]="currentCard().bgGradient"
         [style.box-shadow]="'0 20px 40px ' + currentCard().shadowColor + ', 0 8px 16px rgba(0,0,0,0.1)'">
      
      <!-- Floating Elements -->
      <div class="floating-elements">
        <div class="float-circle circle-1"></div>
        <div class="float-circle circle-2"></div>
        <div class="float-circle circle-3"></div>
      </div>
      
      <!-- Card Content -->
      <div class="card-content">
        <div class="card-header">
          <div class="icon-container">
            <div class="icon-background"></div>
            <span class="card-icon">{{ currentCard().icon }}</span>
            <div class="icon-glow"></div>
          </div>
          <div class="count-section">
            <h2 class="count-number">
              <span class="number-value">{{ animatedCount() }}</span>
              <span class="plus-sign">+</span>
            </h2>
            <p class="count-label">{{ currentCard().title }}</p>
          </div>
        </div>
        
        <!-- Enhanced Graph -->
        <div class="graph-container">
          <div class="graph-background"></div>
          <svg class="mini-graph" viewBox="0 0 100 35">
            <defs>
              <linearGradient [id]="'gradient-' + currentCard().id" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" [style.stop-color]="currentCard().graphColor" stop-opacity="0.8"/>
                <stop offset="50%" [style.stop-color]="currentCard().graphColor" stop-opacity="0.4"/>
                <stop offset="100%" [style.stop-color]="currentCard().graphColor" stop-opacity="0.1"/>
              </linearGradient>
              <filter [id]="'glow-' + currentCard().id">
                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                <feMerge> 
                  <feMergeNode in="coloredBlur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            
            <!-- Grid Lines -->
            <g class="grid-lines" opacity="0.2">
              <line x1="0" y1="8.75" x2="100" y2="8.75" stroke="white" stroke-width="0.5"/>
              <line x1="0" y1="17.5" x2="100" y2="17.5" stroke="white" stroke-width="0.5"/>
              <line x1="0" y1="26.25" x2="100" y2="26.25" stroke="white" stroke-width="0.5"/>
            </g>
            
            <!-- Graph Area -->
            <path 
              class="graph-area" 
              [attr.d]="getGraphPoints() + ' L 100 35 L 0 35 Z'"
              [attr.fill]="'url(#gradient-' + currentCard().id + ')'">
            </path>
            
            <!-- Graph Line -->
            <path 
              class="graph-line" 
              [attr.d]="getGraphPoints()"
              [style.stroke]="currentCard().graphColor"
              [attr.filter]="'url(#glow-' + currentCard().id + ')'"
              fill="none"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round">
            </path>
            
            <!-- Data Points -->
            <g class="data-points">
              <circle cx="20" cy="25" r="2" [attr.fill]="currentCard().graphColor" class="data-point point-1"></circle>
              <circle cx="50" cy="15" r="2" [attr.fill]="currentCard().graphColor" class="data-point point-2"></circle>
              <circle cx="80" cy="10" r="2" [attr.fill]="currentCard().graphColor" class="data-point point-3"></circle>
            </g>
          </svg>
          
          <!-- Graph Stats -->
          <div class="graph-stats">
            <span class="trend-indicator">
              <span class="trend-arrow">↗</span>
              <span class="trend-text">+12%</span>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Enhanced Navigation Controls -->
  <div class="carousel-controls">
    <button 
      class="nav-btn prev-btn" 
      (click)="previousCard()"
      [disabled]="isTransitioning()"
      aria-label="Previous card">
      <div class="btn-background"></div>
      <i class="nav-icon">‹</i>
      <div class="btn-ripple"></div>
    </button>
    
    <!-- Enhanced Dots Indicator -->
    <div class="dots-container">
      <div class="dots-track"></div>
      <button 
        *ngFor="let card of cards; let i = index"
        class="dot"
        [class.active]="i === currentIndex()"
        [style.--dot-color]="card.color"
        (click)="selectCard(i)"
        [disabled]="isTransitioning()"
        [attr.aria-label]="'Go to ' + card.title">
        <div class="dot-inner"></div>
        <div class="dot-glow"></div>
      </button>
    </div>
    
    <button 
      class="nav-btn next-btn" 
      (click)="nextCard()"
      [disabled]="isTransitioning()"
      aria-label="Next card">
      <div class="btn-background"></div>
      <i class="nav-icon">›</i>
      <div class="btn-ripple"></div>
    </button>
  </div>
</div>
