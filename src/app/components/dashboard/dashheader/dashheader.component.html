<header class="header" [class.sidebar-open]="isSidebarOpen">
  <!-- Menu Toggle Button -->
 

  <!-- University Title with Typewriter Effect -->
  <div class="university-title" (click)="navigateToHome()">
    <h1 class="typewriter-text">{{ displayText }}<span class="cursor">|</span></h1>
  </div>

  <!-- Enhanced Search Form -->
  <form class="search-form" (submit)="handleSearchSubmit($event)">
    <div class="search-container" [class.search-active]="isSearchActive">
      <!-- Search Filter Dropdown -->
      <div class="search-filter-dropdown">
        <button 
          type="button"
          class="filter-button"
          [class.active]="isFilterDropdownOpen"
          (click)="toggleFilterDropdown()"
        >
          <i [class]="selectedFilter.icon"></i>
          <span class="filter-text">{{ selectedFilter.label }}</span>
          <i class="fas fa-chevron-down filter-arrow" [class.rotated]="isFilterDropdownOpen"></i>
        </button>
        
        <!-- Filter Options Dropdown -->
        <div class="filter-options" [class.show]="isFilterDropdownOpen">
          <button 
            type="button"
            class="filter-option"
            [class.selected]="selectedFilter.value === option.value"
            *ngFor="let option of filterOptions"
            (click)="selectFilter(option)"
          >
            <i [class]="option.icon"></i>
            <span>{{ option.label }}</span>
          </button>
        </div>
      </div>

      <!-- Search Icon -->
      <i class="fas fa-search search-icon"></i>

      <!-- Search Input -->
    <label for="searchInput"></label>
<input 
  id="searchInput"
  type="text"
  class="search-input"
  [(ngModel)]="searchQuery"
  [placeholder]="'Search ' + selectedFilter.placeholder + '...'"
  (input)="onSearchInput()"
  (focus)="onSearchFocus()"
  (blur)="onSearchBlur()"
  autocomplete="off"
/>

      <!-- Clear Search Button -->
      <button 
        type="button"
        class="clear-search-btn"
        *ngIf="searchQuery"
        (click)="clearSearch()"
      >
        <i class="fas fa-times">X</i>
      </button>

      <!-- Search Results Dropdown -->
      <div class="search-results-dropdown" [class.show]="showSearchResults" @slideDown>
        <!-- Search Results Header -->
        <div class="search-results-header" *ngIf="!isSearchLoading">
          <span class="results-count">
            {{ searchResults.length }} result{{ searchResults.length !== 1 ? 's' : '' }} found
          </span>
          <span class="search-type">{{ selectedFilter.label }}</span>
        </div>

        <!-- Loading State -->
        <div class="search-loading" *ngIf="isSearchLoading">
          <div class="loading-spinner"></div>
          <p>Searching {{ selectedFilter.placeholder }}...</p>
        </div>

        <!-- Search Results List -->
        <div class="search-results-list" *ngIf="!isSearchLoading && searchResults.length > 0">
          <div 
            class="search-result-item"
            *ngFor="let result of searchResults; trackBy: trackByResultId"
            (click)="onSearchResultClick(result)"
          >
            <div class="result-content">
              <!-- Result Icon -->
              <div class="result-icon" [ngClass]="selectedFilter.value === 'course' ? 'course-icon' : 'category-icon'">
                <i [class]="selectedFilter.value === 'course' ? 'fas fa-book' : 'fas fa-th-large'"></i>
              </div>

              <!-- Result Details -->
              <div class="result-details">
                <h4 class="result-title">
                  {{ selectedFilter.value === 'course' ? result.course_name : (result.category_name || 'Database') }}
                </h4>
                <p class="result-subtitle" *ngIf="selectedFilter.value === 'course'">
                  Category: {{ result.category_name || 'Database' }}
                </p>
                <p class="result-subtitle" *ngIf="selectedFilter.value === 'category'">
                  {{ getCourseCountByCategory(result.category_id) }} course{{ getCourseCountByCategory(result.category_id) !== 1 ? 's' : '' }}
                </p>
                <span class="result-id">
                  ID: {{ selectedFilter.value === 'course' ? result.course_id : result.category_id }}
                </span>
              </div>

              <!-- Result Status -->
              <div class="result-status" [class.active]="result.status">
                <span class="status-dot"></span>
                {{ result.status ? 'Active' : 'Inactive' }}
              </div>

              <!-- Result Arrow -->
              <i class="fas fa-chevron-right result-arrow"></i>
            </div>
          </div>
        </div>

        <!-- No Results -->
        <div class="no-results" *ngIf="!isSearchLoading && searchResults.length === 0 && searchQuery">
          <i class="fas fa-search no-results-icon fa-2x"></i>
          <p class="no-results-text">No {{ selectedFilter.placeholder }} found</p>
          <p class="no-results-suggestion">Try searching with different keywords</p>
        </div>
      </div>
    </div>
  </form>

  <!-- Actions -->
  <div class="actions">
    <!-- My Learning Button -->
  

    <!-- Profile Container -->
    <div class="profile-container">
      <button class="profile-button" (click)="toggleProfileDropdown()">
        <div class="avatar">
          <img 
            *ngIf="userAvatar" 
            [src]="userAvatar" 
            
            alt="User Name"
             [alt]="userName"
            class="avatar-image"
          />
          <span *ngIf="!userAvatar" class="avatar-initial">{{ getUserInitial() }}</span>
        </div>
        <div class="profile-info">
          <span class="profile-name">{{ userName }}</span>
        </div>
        <i class="fas fa-chevron-down dropdown-arrow" [class.rotated]="isProfileDropdownOpen"></i>
      </button>

      <!-- Profile Dropdown -->
      <div class="profile-dropdown" [class.show]="isProfileDropdownOpen" @slideDown>
        <!-- Dropdown Header -->
        <div class="dropdown-header">
          <div class="user-avatar-large">
            <img 
              *ngIf="userAvatar" 
              [src]="userAvatar" 
              alt="User Name"
              [alt]="userName"
              class="avatar-image"
            />
            <span *ngIf="!userAvatar" class="avatar-initial-large">{{ getUserInitial() }}</span>
          </div>
          <div class="user-details">
            <h3 class="user-name">{{ userName }}</h3>
            <p class="user-email">{{ userEmail }}</p>
          </div>
        </div>

        <div class="dropdown-divider"></div>

        <!-- Dropdown Menu Items -->
        <div class="dropdown-menu-items">
          <button class="dropdown-item" (click)="onAccountSettings()">
            <i class="fas fa-user-cog item-icon"></i>
            <span>Account Settings</span>
          </button>
          
          <button class="dropdown-item" (click)="onChangePassword()">
            <i class="fas fa-key item-icon"></i>
            <span>Change Password</span>
          </button>
          
          <button class="dropdown-item logout-item" (click)="onLogout()">
            <i class="fas fa-sign-out-alt item-icon"></i>
            <span>Logout</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Search Backdrop -->
<div class="search-backdrop" [class.show]="showSearchResults" (click)="closeSearchResults()"></div>

<!-- Dropdown Backdrop -->
<div class="dropdown-backdrop" [class.show]="isProfileDropdownOpen" (click)="closeDropdown()"></div>